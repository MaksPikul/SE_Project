import { View, Text, Button, TextInput ,SafeAreaView, Keyboard, StyleSheet, Modal, Alert, ScrollView} from "react-native";
import {useState } from "react";
import React from "react";

import { NameDurationInput } from "../../components/fitnessComps/nameAndDuration";
import { EditProg } from "../../components/fitnessComps/EditProg";

export default function ProgCreate() {
  const [entered, setEntered] = useState(false)
  const [data, setData] = useState({
    name: '',
    duration: ''
  })
  const [weeks, setWeeks] = useState(null)
  



  

  const handleSubmit = () => {
    if (data.name === ''|| data.duration === ''){
      Alert.alert("Enter values")
    }
    else{
      console.log(data)
      Keyboard.dismiss()
      let num = parseInt(data.duration,10)
      console.log(typeof(num))
      setWeeks(new Array(num).fill(null))
      setEntered(true)

    }
  }

  const handleInput = (k, v) => {
    setData({...data, [k] : v})
  }



  /* 
  
  will need a conditional state, to display exercise choosing screen, 
  either modal or bottom
  im thinking flat list at bottom
  */

  return (
  
    <ScrollView style={pCreate.container}>

        <NameDurationInput 
        handleInput={handleInput} 
        name={data.name}
        dur={data.duration}
        />

        <EditProg
        duration={data.duration}
        entered={entered}
        handleSubmit={handleSubmit}
        weeks={weeks}/>
        
    </ScrollView>


    );
  }


  const pCreate = StyleSheet.create({
    container: {
      alignContent:"center",
    },

    input: {
      height: 40,
      margin: 12,
      padding: 10,
      borderColor: "purple",
      borderWidth: 2,
    },
    text: {
      color: 'black',
      fontSize: 15,
      fontWeight: 'bold',
      paddingHorizontal: 30, 
      paddingTop: 5,
    },
    dropButton:{
      borderBlockColor: "purple",
      borderWidth: 2,
      height: 40,
      margin: 12,
      alignItems: "center"
      
      
  }});











  import { View, Text, Button, TextInput ,SafeAreaView, Keyboard, StyleSheet, Modal, Alert, ScrollView} from "react-native";
import SelectDropdown from 'react-native-select-dropdown'
import Icon from 'react-native-vector-icons/MaterialCommunityIcons';
import { useEffect, useState } from "react";
import React from "react";
import CustomButton from "../CustomButtons";
import { ExerciseModal } from "./ExerciseModal";



export function EditProg({duration, entered, handleSubmit, weeks}) {

  const [visible, setVisible] = useState(false)
  const [curModal, setCurModal] = useState(null)
  const [modals, setModals] = useState(null)

  const handleModal = () => {
    setVisible(!visible)
  }

    return(
        <View>

          {(!entered ? (
          <View style={{alignSelf: "center"}}>
                <CustomButton
                onPress={()=>{handleSubmit()}}
                text={"Submit"}
                width={300}
                height={30}
                color={"purple"}/>
            </View>) 
            :
            (<View style={{marginBottom: 20}}>
              {weeks.map((week, index)=>{
                return(
                <View>
                  <Text>{"week " + (index+1).toString()}</Text>

                  <View>{week ? 
                  (<><Text>currently empty</Text>
                  
                  </>) 
                  : 
                  (<Text>kek</Text>)}</View>


                  <Button title="edit this week" onPress={() => {
                  handleModal()
                  setCurModal(index)}}></Button>
                </View>
                )
            })}

              {weeks.map((week, index)=>{


                return(
                  <>
                  <ExerciseModal 
                  visible={visible}
                  handleModal={handleModal}
                  curModal={curModal}
                  />
                  </>
              )})}

              <CustomButton
                onPress={()=>{handleSubmit()}}
                text={"Finalize Programme"}
                width={300}
                height={30}
                color={"purple"}/>
            </View>)

           )}
        </View>
    )
}







import { View, Text, Button, TextInput ,SafeAreaView, Keyboard, StyleSheet, Modal, Alert, ScrollView} from "react-native";
import React from "react";
import CustomButton from "../CustomButtons";
import { useState, useEffect } from "react";



export function ExerciseModal ({visible, handleModal, curModal }) {

    const [exNum, setExNum] = useState(1)
    const [exercises, setExercises] = useState(["LOL"])
    


    useEffect(()=>{
        setExercises(new Array(exNum).fill(exNum))
    }, [exNum])

    return(
        <Modal visible={visible}> 
            <>




            <Button title="go back" onPress={() => {handleModal()}}></Button>
            <Text> {"you will find content of week" + (curModal+1).toString() } </Text>

            {exercises.map((exercise, map)=>{

                return(
                    <View style={{flexDirection: "row"}}>
                        <TextInput keyboardType="numeric"/>
                    </View>
                )
            })}


            <Button 
            title="+ add exercise" 
            onPress={()=>{
                if(exNum <= 8){
                    setExNum(exNum+1)
                }
            }}/>

                
            </>
        </Modal> 
    )
}